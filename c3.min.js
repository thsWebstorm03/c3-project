(function(P){function kd(){function r(d,f){d.attr("transform",function(d){return"translate("+(f(d)+ca)+", 0)"})}function x(d,f){d.attr("transform",function(d){return"translate(0,"+f(d)+")"})}function P(d){var f=d[0];d=d[d.length-1];return f<d?[f,d]:[d,f]}function Ca(d){for(var f=[],r=Math.ceil(d[0]);r<d[1];r++)f.push(r);0<f.length&&0<f[0]&&f.unshift(f[0]-(f[1]-f[0]));return f}function Da(d){d=d<da.length?da[d]:d;return N?N(d):d}function p(p){p.each(function(){var p=d.select(this),ia=Ca(u.domain()),
R=p.selectAll(".tick.major").data(ia,String),S=R.enter().insert("g","path").attr("class","tick major").style("opacity",1E-6),T=d.transition(R.exit()).style("opacity",1E-6).remove(),w=d.transition(R).style("opacity",1),F,N=u.rangeExtent?u.rangeExtent():P(u.range()),p=p.selectAll(".domain").data([0]);p.enter().append("path").attr("class","domain");var p=d.transition(p),y=u.copy(),da=this.__chart__||y;this.__chart__=y;S.append("line");S.append("text");var ja=S.select("line"),Ua=w.select("line"),ka=R.select("text"),
Va=S.select("text"),Wa=w.select("text");ca=(y(1)-y(0))/2;R=qa?0:ca;switch(A){case "bottom":F=r;ja.attr("y2",O);Va.attr("y",Math.max(O,0)+f);Ua.attr("x1",R).attr("x2",R).attr("y2",O);Wa.attr("x",0).attr("y",Math.max(O,0)+f);ka.attr("dy",".71em").style("text-anchor","middle");ka.text(function(d){return ia.length<X||0===d%Math.ceil(ia.length/X)?Da(d):""});p.attr("d","M"+N[0]+","+Y+"V0H"+N[1]+"V"+Y);break;case "left":F=x,ja.attr("x2",-O),Va.attr("x",-(Math.max(O,0)+f)),Ua.attr("x2",-O).attr("y2",0),Wa.attr("x",
-(Math.max(O,0)+f)).attr("y",ca),ka.attr("dy",".32em").style("text-anchor","end"),ka.text(function(d){return ia.length<X||0===d%Math.ceil(ia.length/X)?Da(d):""}),p.attr("d","M"+-Y+","+N[0]+"H0V"+N[1]+"H"+-Y)}if(u.ticks)S.call(F,da),w.call(F,y),T.call(F,y);else{var Xa=y.rangeBand()/2,T=function(d){return y(d)+Xa};S.call(F,T);w.call(F,T)}})}var u=d.scale.linear(),A="bottom",O=6,Y=6,f=3,qa=!1,X=10,ca=0,N=null,da=[];p.scale=function(d){if(!arguments.length)return u;u=d;return p};p.orient=function(d){if(!arguments.length)return A;
A=d in{top:1,right:1,bottom:1,left:1}?d+"":"bottom";return p};p.categories=function(d){if(!arguments.length)return da;da=d;return p};p.tickCentered=function(d){if(!arguments.length)return qa;qa=d;return p};p.tickTextNum=function(d){if(!arguments.length)return X;X=d;return p};p.tickFormat=function(d){if(!arguments.length)return N;N=d;return p};p.tickOffset=function(){return ca};p.ticks=function(){};return p}function x(d){return"undefined"===typeof d}function r(d){return"undefined"!==typeof d}var xb=
P.c3={},d=P.d3;xb.generate=function(ba){var ec,fc,Ca,Da,p,u,A,O,Y;function f(a,b){for(var c=ba,e=0;e<a.length;e++){if(!(a[e]in c))return b;c=c[a[e]]}return c}function qa(){yb=null===Ya?ca():Ya;ra=X();u=0;A=(g?zb+ic:0)+(Za?Za:$a?1:40);O=20+(g?0:zb)+la;Y=ab?ab:Ab?bb||g?1:40:20;q=yb-A-Y;s=ra-u-O;Ca=g?0:ra-zb-la;Da=g?jc:A;p=20+la;Bb=g?A-jc-ic:q;cb=g?s:ra-Ca-p;ec=ra-la;fc=A;Cb=s/2;db=0.95*Cb}function X(){var a=null===kc?+d.select(sa).style("height").replace("px",""):kc;return 0<a?a:320}function ca(){return+d.select(sa).style("width").replace("px",
"")}function N(){return q+2+A+Y}function da(){return 40}function ia(){return A+20}function xb(){return s-u+42}function ld(){var a=g?s:q,b=lc(),c=eb();return 1<c?a*b/(c-1):a}function R(){Db=g?10:0;Eb=g?s:q;Fb=g?0:s;Gb=g?q:1;Hb=g?0:cb;Ib=g?Bb:10;m=S(Db,Eb,r(m)?m.domain():void 0,function(){return K.tickOffset()});z=T(Fb,Gb,r(z)?z.domain():void 0);Z=T(Fb,Gb,r(Z)?Z.domain():void 0);U=S(Db,Eb,r(V)?V:void 0,function(a){return 0===a%1?fb.tickOffset():0});gb=T(Hb,Ib);hb=T(Hb,Ib);K=gc(m,md);ta=d.svg.axis().scale(z).orient(nd);
ib=d.svg.axis().scale(Z).orient(od);fb=gc(U,pd);jb=Ua();mc=ka();nc=ka(0.98)}function S(a,b,c,e){var k=(B?d.time.scale():d.scale.linear()).range([a,b]);k.orgDomain=function(){return k.domain()};r(c)&&k.domain(c);x(e)&&(e=function(){return 0});if(ea){var G=k,f,k=function(a){return G(a)+e(a)};for(f in G)k[f]=G[f];k.orgDomain=function(){return G.domain()};k.domain=function(a){if(!arguments.length)return a=G.domain(),[a[0],a[1]+1];G.domain(a);return k}}return k}function T(a,b){return d.scale.linear().range([a,
b])}function w(a){return"y2"===y(a)?Z:z}function F(a){return"y2"===y(a)?hb:gb}function gc(a,b){var c=(ea?kd():d.svg.axis()).scale(a).orient(b);c.tickFormat(hc());ea?c.categories(Ea).tickCentered(qd):c.tickOffset=function(){return 0};return c}function y(a){return a in oc?oc[a]:"y"}function hc(){var a=B?rd:ea?sd:function(a){return a};kb&&(a="function"===typeof kb?kb:B?function(a){return d.time.format(kb)(a)}:a);return a}function ja(a){var b=!1;Jb(h.data.targets).forEach(function(c){b||c.data.id!==a.data.id||
(b=!0,a=c)});return b?a:null}function Ua(){var a=d.svg.arc().outerRadius(db).innerRadius(0),b=function(b,e){var k;return e?a(b):(k=ja(b))?a(k):"M 0 0"};b.centroid=a.centroid;return b}function ka(a){var b=d.svg.arc().outerRadius(Cb*(a?a:1)).innerRadius(0);return function(a){return(a=ja(a))?b(a):"M 0 0"}}function Va(a){a=ja(a);var b,c;b="";a&&(b=jb.centroid(a),a=b[0],b=b[1],c=Math.sqrt(a*a+b*b),b="translate("+0.8*(a/c)*db+","+0.8*(b/c)*db+")");return b}function Wa(a){return(100*(a.endAngle-a.startAngle)/
(2*Math.PI)).toFixed(1)+"%"}function Xa(a,b){var c=n.selectAll(".chart-arc.target"+(a?"-"+a:"")),e=n.selectAll(".-arc").filter(function(b){return b.data.id!==a});c.selectAll("path").transition().duration(50).attr("d",mc).transition().duration(100).attr("d",nc);b||e.style("opacity",0.3)}function wb(a){n.selectAll(".chart-arc.target"+(a?"-"+a:"")).selectAll("path").transition().duration(50).attr("d",jb);n.selectAll(".-arc").style("opacity",1)}function td(a){var b=pc(a),c,e,k,G;if(0<t.length)for(G=qc(a),
a=0;a<t.length;a++)for(e=t[a][0],G&&b[e]&&b[e].forEach(function(a,c){b[e][c]=0>a?a:0}),c=1;c<t[a].length;c++)k=t[a][c],b[k]&&b[k].forEach(function(a,c){y(k)!==y(e)||!b[e]||G&&0<+a||(b[e][c]+=+a)});return d.min(Object.keys(b).map(function(a){return d.min(b[a])}))}function ud(a){var b=pc(a),c,e,k,G;if(0<t.length)for(G=vd(a),a=0;a<t.length;a++)for(e=t[a][0],G&&b[e]&&b[e].forEach(function(a,c){b[e][c]=0<a?a:0}),c=1;c<t[a].length;c++)k=t[a][c],b[k]&&b[k].forEach(function(a,c){y(k)!==y(e)||!b[e]||G&&0>
+a||(b[e][c]+=+a)});return d.max(Object.keys(b).map(function(a){return d.max(b[a])}))}function lb(a){var b=mb(function(b){return y(b.id)===a}),c="y2"===a?wd:xd,e="y2"===a?yd:zd,c=c?c:td(b),e=e?e:ud(b),k=0.1*Math.abs(e-c),d=k,f=k,g="y2"===a?Ad:Bd;g&&(c=Math.max(Math.abs(c),Math.abs(e)),e=c-g,c=g-c);"y"===a&&Fa&&(d=Fa.top?Fa.top:k,f=Fa.bottom?Fa.bottom:k);"y2"===a&&Ga&&(d=Ga.top?Ga.top:k,f=Ga.bottom?Ga.bottom:k);Ha(b,"bar")&&!qc(b)&&(f=c);return[c-f,e+d]}function lc(a){var b;a?(a=m.domain(),b=H.extent()):
(a=V,b=m.domain());return(a[1]-a[0])/(b[1]-b[0])}function Cd(a){return d.min(a,function(a){return d.min(a.values,function(a){return a.x})})}function Dd(a){return d.max(a,function(a){return d.max(a.values,function(a){return a.x})})}function nb(a){var b=[Cd(a),Dd(a)];a=b[0];var b=b[1],c=ea?0:0.01*Math.abs(a-b);a=B?new Date(a.getTime()-c):a-c;b=B?new Date(b.getTime()+c):b+c;return[a,b]}function Ed(a){for(var b=0;b<a.length;b++)if(!(a[b]in ob))return!1;return!0}function Fd(a){for(var b=[],c=0;c<a.length;c++)a[c]in
ob&&b.push(rc(ob[a[c]]));return b}function Kb(a){return"start"in a?m(B?ma(a.start):a.start):0}function sc(a){var b=Kb(a);a=("end"in a?m(B?ma(a.end):a.end):q)-b;return 0>a?0:a}function tc(a){return na&&a===na||$&&Gd($,a)}function Hd(a){return!tc(a)}function Id(a){Object.keys(a).forEach(function(b){$[b]=a[b]})}function pb(a){var b;a&&(b=Ia[a.id],a.name=b?b:a.id);return a}function uc(a){var b=a[0],c={},e=[],k,d;for(k=1;k<a.length;k++){c={};for(d=0;d<a[k].length;d++)c[b[d]]=a[k][d];e.push(c)}return e}
function vc(a){var b=[],c,e,k;for(c=0;c<a.length;c++)for(k=a[c][0],e=1;e<a[c].length;e++)x(b[e-1])&&(b[e-1]={}),b[e-1][k]=a[c][e];return b}function Ja(a){var b=d.keys(a[0]).filter(Hd),c=d.keys(a[0]).filter(tc);if(B&&0===c.length)return P.alert('data.x or data.xs must be specified when axis.x.type == "timeseries"'),[];Lb&&b.forEach(function(b){var k=na?na:$?$[b]:null;0<=c.indexOf(k)?h.data.x[b]=a.map(function(a){return a[k]}):h.data.x[b]=h.data.x[Object.keys(h.data.x)[0]]});b=b.map(function(b){var c=
Jd(b);return{id:c,id_org:b,values:a.map(function(a,d){var f;f=na?na:$?$[b]:null;f=B?ma(a[f]):Lb?a[f]?a[f]:b in h.data.x&&h.data.x[b]&&h.data.x[b][d]?h.data.x[b][d]:d:d;a.x=f;return{x:f,value:null===a[b]||isNaN(a[b])?null:+a[b],id:c}})}});b.forEach(function(a){var b;a.values=a.values.sort(function(a,b){return(a.x||0===a.x?a.x:Infinity)-(b.x||0===b.x?b.x:Infinity)});b=0;a.values.forEach(function(a){a.index=b++})});b.forEach(function(a){ob[a.id_org]=rc(a)});return b}function rc(a){return{id:a.id,id_org:a.id_org,
values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}}function wc(a){return 0<a&&h.data.targets[0].values[a-1]?h.data.targets[0].values[a-1].x:void 0}function eb(){return d.max(h.data.targets,function(a){return a.values.length})}function Kd(){var a=h.data.targets.length,b=0,c;1<a?h.data.targets.forEach(function(a){a.values.length>b&&(c=a,b=a.values.length)}):c=a?h.data.targets[0]:null;return c}function qb(a){a=x(a)?h.data.targets:a;return a.map(function(a){return a.id})}function xc(a){var b=
qb(),c;for(c=0;c<b.length;c++)if(b[c]===a)return!0;return!1}function mb(a){return r(a)?h.data.targets.filter(a):h.data.targets}function pc(a){var b={};a.forEach(function(a){b[a.id]=[];a.values.forEach(function(e){b[a.id].push(e.value)})});return b}function yc(a,b){var c=Object.keys(a),e,k,d;for(e=0;e<c.length;e++)for(d=a[c[e]].values,k=0;k<d.length;k++)if(b(d[k].value))return!0;return!1}function qc(a){return yc(a,function(a){return 0>a})}function vd(a){return yc(a,function(a){return 0<a})}function sd(a){return a<
Ea.length?Ea[a]:a}function Ka(a){return"-shapes -shapes-"+a.id}function zc(a){return Ka(a)+" -line -line-"+a.id}function Ld(a){return Ka(a)+" -circles -circles-"+a.id}function Ac(a){return Ka(a)+" -bars -bars-"+a.id}function Md(a){return Ka(a.data)+" -arc -arc-"+a.data.id}function Nd(a){return Ka(a)+" -area -area-"+a.id}function Od(a,b){return"-shape -shape-"+b+" -circle -circle-"+b}function Bc(a,b){return"-shape -shape-"+b+" -bar -bar-"+b}function Pd(a,b){return"region region-"+b+" "+("classes"in
a?[].concat(a.classes).join(" "):"")}function Cc(a,b){return"event-rect event-rect-"+b}function Qd(a){return a.value?Dc(a)?0.5:1:0}function ua(a){return m(a.x)}function La(a){return m(B?ma(a.value):a.value)}function Ma(a){return z(a.value)}function Ec(a){return U(a.x)}function Fc(a,b){var c,e=a[b].x,k=[];for(c=b-1;0<=c&&e===a[c].x;c--)k.push(a[c]);for(c=b;c<a.length&&e===a[c].x;c++)k.push(a[c]);return k}function Gc(a,b,c,e){c=c?c:0;e=e?e:a.length-1;var k=Math.floor((e-c)/2)+c;0<m(a[k].x)-b[0]?e=k:
c=k;return 1===e-c?(k=[],a[c].x&&(k=k.concat(Fc(a,c))),a[e].x&&(k=k.concat(Fc(a,e))),Hc(k,b)):Gc(a,b,c,e)}function Ic(a,b){var c;c=a.map(function(a){return Gc(a.values,b)});return Hc(c,b)}function Hc(a,b){var c,e;a.forEach(function(a){var d=Mb(a,b);if(d<c||!c)c=d,e=a});return e}function Jc(a,b){var c,e,k,d,f;0!==a.filter(function(a){return a.value}).length&&(W.html(Kc(a)).style("visibility","hidden").style("display","block"),c=W.property("offsetWidth"),e=W.property("offsetHeight"),g?d=b[0]:(k=n.property("offsetLeft"),
d=k+(Za?Za:$a?1:40)+m(a[0].x)+20,f=d+c,k=k+(null===Ya?ca():Ya)-(ab?ab:Ab?bb||g?1:40:20),f>k&&(d-=c+30)),c=b[1]+15+e<X()?b[1]+15:b[1]-e,W.style("top",c+"px").style("left",d+"px").style("visibility","visible"))}function Lc(a){Ha(h.data.targets,"scatter")||C(h.data.targets)||l.selectAll("line.xgrid-focus").style("visibility","visible").data([a]).attr(g?"y1":"x1",ua).attr(g?"y2":"x2",ua)}function Mc(){l.select("line.xgrid-focus").style("visibility","hidden")}function va(a){return a.x||0===a.x?m(a.x):
null}function wa(a){return w(a.id)(a.value)}function Rd(){var a={},b=0,c,e;mb(rb).forEach(function(k){for(c=0;c<t.length;c++)if(!(0>t[c].indexOf(k.id)))for(e=0;e<t[c].length;e++)if(t[c][e]in a){a[k.id]=a[t[c][e]];break}x(a[k.id])&&(a[k.id]=b++)});a.__max__=b-1;return a}function Sd(a,b,c,e){var k=e?U:m;return b?function(e){var d=e.id in c?c[e.id]:0;return e.x||0===e.x?k(e.x)-a*(b/2-d):0}:function(){return 0}}function Td(a){return function(b){return(a?F(b.id):w(b.id))(b.value)}}function Ud(a,b){var c=
Object.keys(a);return function(e,k){var d=b?F(e.id):w(e.id),f=d(0),g=f;mb(rb).forEach(function(b){b.id!==e.id&&a[b.id]===a[e.id]&&c.indexOf(b.id)<c.indexOf(e.id)&&0<b.values[k].value*e.value&&(g+=d(b.values[k].value)-f)});return g}}function Na(a,b){var c=x(a)?qb():a;"string"===typeof c&&(c=[c]);for(var e=0;e<c.length;e++)I[c[e]]=b}function Ha(a,b){var c=!1;a.forEach(function(a){I[a.id]===b&&(c=!0);a.id in I||"line"!==b||(c=!0)});return c}function C(a){return Ha(a,"pie")}function Nb(a){a="string"===
typeof a?a:a.id;return!(a in I)||"line"===I[a]||"spline"===I[a]||"area"===I[a]||"area-spline"===I[a]}function Nc(a){a="string"===typeof a?a:a.id;return"spline"===I[a]||"area-spline"===I[a]}function rb(a){return"bar"===I["string"===typeof a?a:a.id]}function Dc(a){return"scatter"===I["string"===typeof a?a:a.id]}function Oc(a){return"pie"===I["string"===typeof a?a:a.id]}function Pc(a){return rb(a)?a.values:[]}function Vd(a){return Nb(a)||Dc(a)?a.values:[]}function ma(a){var b;if(!a)throw Error(a+" can not be parsed as d3.time with format "+
Ob+". Maybe 'x' of this data is not defined. See data.x or data.xs option.");b=d.time.format(Ob).parse(a);if(!b)throw Error("Failed to parse '"+a+"' with format "+Ob);return b}function Qc(a,b){var c=d.mouse(a),e=d.select(a),k=1*e.attr("cx"),e=1*e.attr("cy");return Math.sqrt(Math.pow(k-c[0],2)+Math.pow(e-c[1],2))<b}function Rc(a){var b=d.mouse(a),c=d.select(a);a=1*c.attr("x");var e=1*c.attr("y"),c=1*c.attr("width");return a-10<b[0]&&b[0]<a+c+10&&e-10<b[1]}function Wd(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<
a&&a<=b[c].end)return!0;return!1}function Gd(a,b){var c=!1;Object.keys(a).forEach(function(e){a[e]===b&&(c=!0)});return c}function Mb(a,b){return Math.pow(m(a.x)-b[0],2)+Math.pow(z(a.value)-b[1],2)}function Sc(a,b,c){Xd(a,b);l.select(".selected-circles-"+b.id).selectAll(".selected-circle-"+c).data([b]).enter().append("circle").attr("class",function(){return"selected-circle selected-circle-"+c}).attr("cx",g?wa:va).attr("cy",g?va:wa).attr("stroke",function(){return L(b.id)}).attr("r",1.4*Oa).transition().duration(100).attr("r",
Oa)}function Pb(a,b,c){Yd(a,b);l.select(".selected-circles-"+b.id).selectAll(".selected-circle-"+c).transition().duration(100).attr("r",0).remove()}function Tc(a,b,c,e){a?Sc(b,c,e):Pb(b,c,e)}function Zd(){}function Uc(){}function Vc(a,b,c,e){}function Qb(a){return a.filter(function(a){return null!==a.value})}function Rb(a,b){return(b?l.selectAll(".-circles-"+b):l).selectAll(".-circle"+(a||0===a?"-"+a:""))}function Sb(a){Rb(a).filter(function(){return d.select(this).classed(aa)}).classed(aa,!1).attr("r",
Tb)}function Wc(a){return l.selectAll(".-bar"+(a||0===a?"-"+a:""))}function $d(a,b,c,e){var d,f,h="M",l,m,xa,p,q,n=[];if(r(e))for(d=0;d<e.length;d++)n[d]={},x(e[d].start)?n[d].start=a[0].x:n[d].start=B?ma(e[d].start):e[d].start,x(e[d].end)?n[d].end=a[a.length-1].x:n[d].end=B?ma(e[d].end):e[d].end;p=g?function(a){return c(a.value)}:function(a){return b(a.x)};q=g?function(a){return b(a.x)}:function(a){return c(a.value)};e=B?function(a,e,d,k){var f=a.x.getTime();a=e.x-a.x;e=new Date(f+a*(d+k));return"M"+
b(new Date(f+a*d))+" "+c(m(d))+" "+b(e)+" "+c(m(d+k))}:function(a,e,d,k){return"M"+b(l(d))+" "+c(m(d))+" "+b(l(d+k))+" "+c(m(d+k))};for(d=0;d<a.length;d++)if(x(n)||!Wd(a[d].x,n))h+=" "+p(a[d])+" "+q(a[d]);else{l=S(a[d-1].x,a[d].x);m=T(a[d-1].value,a[d].value);f=b(a[d].x)-b(a[d-1].x);xa=c(a[d].value)-c(a[d-1].value);f=Math.sqrt(Math.pow(f,2)+Math.pow(xa,2));xa=2/f;var s=2*xa;for(f=xa;1>=f;f+=s)h+=e(a[d-1],a[d],f,xa)}return h}function Ub(a){var b;sb=d.select(sa);if(sb.empty())P.alert('No bind element found. Check the selector specified by "bindto" and existance of that element. Default "bindto" is "#chart".');
else{sb.html("");h.data.x={};h.data.targets=Ja(a);qa();R();m.domain(d.extent(nb(h.data.targets)));z.domain(lb("y"));Z.domain(lb("y2"));U.domain(m.domain());gb.domain(z.domain());hb.domain(Z.domain());K.ticks(10>a.length?a.length:10);ta.ticks(ae).outerTickSize(0).tickFormat(be);ib.ticks(ce).outerTickSize(0).tickFormat(de);V=m.domain();H.scale(U);oa&&D.scale(m);n=d.select(sa).append("svg").attr("width",q+A+Y).attr("height",s+u+O).on("mouseenter",ee).on("mouseleave",fe);tb=n.append("defs");tb.append("clipPath").attr("id",
Vb).append("rect").attr("y",u).attr("width",q).attr("height",s-u);tb.append("clipPath").attr("id","xaxis-clip").append("rect").attr("x",-1-A).attr("y",-20).attr("width",N).attr("height",da);tb.append("clipPath").attr("id","yaxis-clip").append("rect").attr("x",-A+1).attr("y",u-1).attr("width",ia).attr("height",xb);l=n.append("g").attr("transform",M.main);E=ya?n.append("g").attr("transform",M.context):null;za=Aa?n.append("g").attr("transform",M.legend):null;W=d.select(sa).style("position","relative").append("div").style("position",
"absolute").style("z-index","10").style("display","none");l.append("g").attr("class","x axis").attr("clip-path",g?"":"url(#xaxis-clip)").attr("transform",M.x).call(g?ta:K).append("text").attr("class","-axis-x-label").attr("x",q).attr("dy","-.5em").style("text-anchor","end").text(ge);l.append("g").attr("class","y axis").attr("clip-path",g?"url(#yaxis-clip)":"").call(g?K:ta).append("text").attr("transform","rotate(-90)").attr("dy","1.2em").attr("dx","-.5em").style("text-anchor","end").text(he);Ab&&
l.append("g").attr("class","y2 axis").attr("transform",M.y2).call(ib);a=l.append("g").attr("clip-path",Pa).attr("class","grid");Xc&&a.append("g").attr("class","xgrids");Wb&&(b=a.append("g").attr("class","xgrid-lines").selectAll(".xgrid-line").data(Wb).enter().append("g").attr("class","xgrid-line"),b.append("line").attr("class",function(a){return""+a["class"]}),b.append("text").attr("class",function(a){return""+a["class"]}).attr("text-anchor","end").attr("transform",g?"":"rotate(-90)").attr("dx",g?
0:-u).attr("dy",-5).text(function(a){return a.text}));ie&&a.append("g").attr("class","xgrid-focus").append("line").attr("class","xgrid-focus").attr("x1",g?0:-10).attr("x2",g?q:-10).attr("y1",g?-10:u).attr("y2",g?-10:s);Yc&&a.append("g").attr("class","ygrids");Xb&&(a=a.append("g").attr("class","ygrid-lines").selectAll("ygrid-line").data(Xb).enter().append("g").attr("class","ygrid-line"),a.append("line").attr("class",function(a){return""+a["class"]}),a.append("text").attr("class",function(a){return""+
a["class"]}).attr("text-anchor","end").attr("transform",g?"rotate(-90)":"").attr("dx",g?0:-u).attr("dy",-5).text(function(a){return a.text}));l.append("g").attr("clip-path",Pa).attr("class","regions");l.append("g").attr("clip-path",Pa).attr("class","chart");l.select(".chart").append("g").attr("class","event-rects").style("fill-opacity",0).style("cursor",oa?"ew-resize":null);l.select(".chart").append("g").attr("class","chart-bars");l.select(".chart").append("g").attr("class","chart-lines");l.select(".chart").append("g").attr("class",
"chart-arcs").attr("transform",M.arc);if(oa)l.insert("rect",je?null:"g.grid").attr("class","zoom-rect").attr("width",q).attr("height",s).style("opacity",0).style("cursor","ew-resize").call(D).on("dblclick.zoom",null);null!==ub&&H.extent("function"!==typeof ub?ub:ub(nb()));ya&&(E.append("g").attr("clip-path",Pa).attr("class","chart"),E.select(".chart").append("g").attr("class","chart-bars"),E.select(".chart").append("g").attr("class","chart-lines"),E.append("g").attr("clip-path",Pa).attr("class","x brush").call(H).selectAll("rect").attr(g?
"width":"height",g?Bb:cb),E.append("g").attr("class","x axis").attr("transform",M.subx).call(fb));Aa&&vb(h.data.targets);Zc(h.data.targets);J({withTransition:!1,withUpdateXDomain:!0});if(ke){if(B&&"string"===typeof Ba){Ba=ma(Ba);for(a=0;a<h.data.targets[0].values.length&&0!==h.data.targets[0].values[a].x-Ba;a++);Ba=a}W.html(Kc(h.data.targets.map(function(a){return pb(a.values[Ba])})));W.style("top",$c.top).style("left",$c.left).style("display","block")}null==P.onresize&&(P.onresize=le());P.onresize.add&&
P.onresize.add(me)}}function ne(a){a.append("rect").attr("class",Cc).style("cursor",fa&&pa?"pointer":null).on("mouseover",function(a,c){if(!Qa&&!C(h.data.targets)){var e=h.data.targets.map(function(a){return pb(a.values[c])}),d,f;if(0<Object.keys(Ia).length){f=[];for(var g in Ia)for(d=0;d<e.length;d++)if(e[d].id===g){f.push(e[d]);e.shift(d);break}e=f.concat(e)}Yb&&Rb(c,void 0).classed(aa,!0).attr("r",Zb);Wc(c).classed(aa,!1);Lc(e[0])}}).on("mouseout",function(a,c){C(h.data.targets)||(Mc(),W.style("display",
"none"),Sb(c),Wc(void 0).classed(aa,!1))}).on("mousemove",function(a,c){var e;Qa||C(h.data.targets)||(e=h.data.targets.map(function(a){return pb(a.values[c])}),Jc(e,d.mouse(this)),fa&&(pa||l.selectAll(".-shape-"+c).filter(function(a){return ga(a)}).each(function(){var a=d.select(this).classed(aa,!0);"circle"===this.nodeName&&a.attr("r",Zb);n.select(".event-rect-"+c).style("cursor",null)}).filter(function(){var a=d.select(this);if("circle"===this.nodeName)return Qc(this,Oa);if("rect"===this.nodeName)return Rc(this,
a.attr("x"),a.attr("y"))}).each(function(){var a=d.select(this);a.classed(aa)||(a.classed(aa,!0),"circle"===this.nodeName&&a.attr("r",Oa));n.select(".event-rect-"+c).style("cursor","pointer")})))}).on("click",function(a,c){C(h.data.targets)||($b?$b=!1:l.selectAll(".-shape-"+c).each(function(a){ad(this,a,c)}))}).call(d.behavior.drag().origin(Object).on("drag",function(){bd(d.mouse(this))}).on("dragstart",function(){cd(d.mouse(this))}).on("dragend",function(){dd()})).call(D).on("dblclick.zoom",null)}
function oe(a){a.append("rect").attr("x",0).attr("y",0).attr("width",q).attr("height",s).attr("class","event-rect").on("mouseout",function(){C(h.data.targets)||(Mc(),W.style("display","none"),Sb())}).on("mousemove",function(){var a,c,e;Qa||C(h.data.targets)||(a=d.mouse(this),c=Ic(h.data.targets,a),e=[pb(c)],Jc(e,a),Yb&&(Sb(),Rb(c.index,c.id).classed(aa,!0).attr("r",Zb)),Lc(e[0]),100>Mb(c,a)?n.select(".event-rect").style("cursor","pointer"):n.select(".event-rect").style("cursor",null))}).on("click",
function(){var a,c;C(h.data.targets)||(a=d.mouse(this),c=Ic(h.data.targets,a),100>Mb(c,a)&&l.select(".-circles-"+c.id).select(".-circle-"+c.index).each(function(){ad(this,c,c.index)}))}).call(d.behavior.drag().origin(Object).on("drag",function(){bd(d.mouse(this))}).on("dragstart",function(){cd(d.mouse(this))}).on("dragend",function(){dd()})).call(D).on("dblclick.zoom",null)}function ad(a,b,c){var e=d.select(a),f=e.classed(ha),g=!1,h;"circle"===a.nodeName?(g=Qc(a,1.5*Oa),h=Tc):"rect"===a.nodeName&&
(g=Rc(a),h=Vc);if(pa||g)fa&&ga(b)&&(e.classed(ha,!f),h(!f,e,b,c)),pe(b,e)}function bd(a){var b,c,e,f,g,m,n;C(h.data.targets)||!fa||oa&&!D.altDomain||(b=ac[0],c=ac[1],e=a[0],a=a[1],f=Math.min(b,e),g=Math.max(b,e),m=pa?u:Math.min(c,a),n=pa?s:Math.max(c,a),l.select(".dragarea").attr("x",f).attr("y",m).attr("width",g-f).attr("height",n-m),l.selectAll(".-shapes").selectAll(".-shape").filter(function(a){return ga(a)}).each(function(a,b){var c=d.select(this),e=c.classed(ha),h=c.classed(bc),l,p,q,r;l=!1;
"circle"===this.nodeName?(l=1*c.attr("cx"),p=1*c.attr("cy"),r=Tc,l=f<l&&l<g&&m<p&&p<n):"rect"===this.nodeName&&(l=1*c.attr("x"),p=1*c.attr("y"),q=1*c.attr("width"),r=Vc,l=f<l+q&&l<g&&p<n);l^h&&(c.classed(bc,!h),c.classed(ha,!e),r(!e,c,a,b))}))}function cd(a){!C(h.data.targets)&&fa&&(ac=a,l.select(".chart").append("rect").attr("class","dragarea").style("opacity",0.1),Qa=!0)}function dd(){!C(h.data.targets)&&fa&&(l.select(".dragarea").transition().duration(100).style("opacity",0).remove(),l.selectAll(".-shape").classed(bc,
!1),Qa=!1)}function J(a){var b,c,e,f=Rd(),n=f.__max__+1,p,v,t;a=r(a)?a:{};c=r(a.withY)?a.withY:!0;e=r(a.withSubchart)?a.withSubchart:!0;v=r(a.withTransition)?a.withTransition:!0;b=r(a.withUpdateXDomain)?a.withUpdateXDomain:!1;a=r(a.withUpdateOrgXDomain)?a.withUpdateOrgXDomain:!1;t=C(h.data.targets);v=v?250:0;a&&(m.domain(d.extent(nb(h.data.targets))),V=m.domain(),D.scale(m).updateScaleExtent(),U.domain(m.domain()),H.scale(U));b&&(m.domain(H.empty()?V:H.extent()),oa&&D.scale(m).updateScaleExtent());
z.domain(lb("y"));Z.domain(lb("y2"));l.select(".x.axis").transition().duration(g?v:0).call(g?ta:K).style("opacity",t?0:1);l.select(".y.axis").transition().duration(g?0:v).call(g?K:ta).style("opacity",t?0:1);l.select(".y2.axis").transition().call(ib).style("opacity",t?0:1);l.select(".x.axis .-axis-x-label").attr("x",q);gb.domain(z.domain());hb.domain(Z.domain());W.style("display","none");l.select("line.xgrid-focus").style("visibility","hidden").attr("y2",s);if(Xc){if("year"===qe)for(b=[],t=nb(),a=
t[0].getFullYear(),t=t[1].getFullYear();a<=t;a++)b.push(new Date(a+"-01-01 00:00:00"));else b=m.ticks(10);b=l.select(".xgrids").selectAll(".xgrid").data(b);b.enter().append("line").attr("class","xgrid");b.attr("x1",g?0:function(a){return m(a)-K.tickOffset()}).attr("x2",g?q:function(a){return m(a)-K.tickOffset()}).attr("y1",g?function(a){return m(a)-K.tickOffset()}:u).attr("y2",g?function(a){return m(a)-K.tickOffset()}:s).style("opacity",function(){return+d.select(this).attr(g?"y1":"x1")===(g?s:0)?
0:1});b.exit().remove()}Wb&&(b=l.selectAll(".xgrid-lines"),b.selectAll("line").transition().duration(v).attr("x1",g?0:La).attr("x2",g?q:La).attr("y1",g?La:u).attr("y2",g?La:s),b.selectAll("text").attr("x",g?q:0).attr("y",La));c&&Yc&&(b=l.select(".ygrids").selectAll(".ygrid").data(z.ticks(10)),b.enter().append("line").attr("class","ygrid"),b.attr("x1",g?z:0).attr("x2",g?z:q).attr("y1",g?0:z).attr("y2",g?s:z),b.exit().remove());c&&Xb&&(c=l.select(".ygrid-lines"),c.selectAll("line").transition().duration(v).attr("x1",
g?Ma:0).attr("x2",g?Ma:q).attr("y1",g?0:Ma).attr("y2",g?s:Ma),c.selectAll("text").attr("x",g?0:q).attr("y",Ma));c=function(a){var b=ea?n?1.2*K.tickOffset()/n:0:0.6*((g?s:q)*lc(!!a)/(eb()-1)),c=Sd(b,n,f,!!a),e=Td(!!a),d=Ud(f,!!a),h=a?F:w;return function(f,k){var l=h(f.id)(0),m=d(f,k)||l,l=[[c(f),m],[c(f),e(f)-(l-m)],[c(f)+b,e(f)-(l-m)],[c(f)+b,m]],m=a||!g?0:1,n=a||!g?1:0;return"M "+l[0][m]+","+l[0][n]+" L"+l[1][m]+","+l[1][n]+" L"+l[2][m]+","+l[2][n]+" L"+l[3][m]+","+l[3][n]+" z"}};b=l.selectAll(".-bars").selectAll(".-bar").data(Pc);
b.enter().append("path").attr("d",c(!1)).style("stroke","none").style("opacity",0).style("fill",function(a){return L(a.id)}).attr("class",Bc);b.transition().duration(v).attr("d",c(!1)).style("opacity",1);b.exit().transition().duration(v).style("opacity",0).remove();l.selectAll(".chart-line").select(".-line").transition().duration(v).attr("d",re);l.selectAll(".-area").transition().duration(v).attr("d",se);b=l.selectAll(".-circles").selectAll(".-circle").data(Vd);b.enter().append("circle").attr("class",
Od).attr("r",Tb);b.transition().duration(v).style("opacity",Qd).attr("cx",g?wa:va).attr("cy",g?va:wa);b.exit().remove();l.selectAll(".chart-arc").select(".-arc").style("opacity",function(a){return a===this._current?0:1}).transition().duration(v).attrTween("d",function(a){a=ja(a);if(!a)return function(){return"M 0 0"};var b=d.interpolate(this._current,a);this._current=b(0);return function(a){a=b(a);return Oc(a.data)?jb(a,!0):"M 0 0"}}).style("opacity",1);l.selectAll(".chart-arc").select("text").attr("transform",
Va).attr("opacity",0).transition().duration(v).text(Wa).attr("opacity",function(a){return Oc(a.data)?1:0});ya&&(null!==d.event&&"zoom"===d.event.type&&H.extent(m.orgDomain()).update(),e&&(E.select(".x.axis").transition().duration(g?v:0).call(fb),H.empty()||H.extent(m.orgDomain()).update(),e=E.selectAll(".-bars").selectAll(".-bar").data(Pc),e.enter().append("path").attr("d",c(!0)).style("stroke","none").style("fill",function(a){return L(a.id)}).attr("class",Bc),e.style("opacity",0).transition().duration(v).attr("d",
c(!0)).style("opacity",1),e.exit().transition().duration(v).style("opacity",0).remove(),E.selectAll(".-line").transition().duration(v).attr("d",te)));l.selectAll(".selected-circles").filter(function(a){return rb(a)}).selectAll("circle").remove();l.selectAll(".selected-circle").transition().duration(v).attr("cx",g?wa:va).attr("cy",g?va:wa);$?(c=l.select(".event-rects").selectAll(".event-rect").data([0]),oe(c.enter()),c.attr("x",0).attr("y",0).attr("width",q).attr("height",s)):(Lb?(p=function(a,b){var c=
wc(b),e=b<eb()-1?h.data.targets[0].values[b+1].x:void 0;return(m(e?e:a.x+50)-m(c?c:a.x-50))/2},e=function(a,b){var c=wc(b);return(m(a.x)+m(c?c:a.x-50))/2}):(p=ld(),e=function(a){return m(a.x)-p/2}),c=Kd(),l.select(".event-rects").datum(c?c.values:[]),c=l.select(".event-rects").selectAll(".event-rect").data(function(a){return a}),ne(c.enter()),c.attr("class",Cc).attr("x",g?0:e).attr("y",g?e:0).attr("width",g?q:p).attr("height",g?p:s),c.exit().remove());e=l.select(".regions").selectAll("rect.region").data(Q);
e.enter().append("rect");e.attr("class",Pd).attr("x",g?0:Kb).attr("y",g?Kb:u).attr("width",g?q:sc).attr("height",g?sc:s).style("fill-opacity",function(a){return r(a.opacity)?a.opacity:0.1});e.exit().transition().duration(v).style("fill-opacity",0).remove()}function ue(){"mousemove"===d.event.sourceEvent.type&&D.altDomain?(m.domain(D.altDomain),D.scale(m).updateScaleExtent()):(ea&&m.orgDomain()[0]===V[0]&&m.domain([V[0]-1E-10,m.orgDomain()[1]]),J({withTransition:!1,withY:!1,withSubchart:!1}),"mousemove"===
d.event.sourceEvent.type&&($b=!0))}function le(){function a(){b.forEach(function(a){a()})}var b=[];a.add=function(a){b.push(a)};return a}function me(){qa();R();H.scale(U);oa&&D.scale(m);n.attr("width",yb).attr("height",ra);n.select("#"+Vb).select("rect").attr("width",q).attr("height",s);n.select("#xaxis-clip").select("rect").attr("width",N);n.select(".zoom-rect").attr("width",q).attr("height",s);l.select(".x.axis").attr("transform",M.x);l.select(".y2.axis").attr("transform",M.y2);l.select(".chart-arcs").attr("transform",
M.arc);ya&&(E.attr("transform",M.context),E.select(".x.axis").attr("transform",M.subx));Aa&&(za.attr("transform",M.legend),vb(h.data.targets,{withTransition:!1}));J({withTransition:!1,withUpdateXDomain:!0})}function Zc(a){var b;ed&&Na(qb(a).filter(function(a){return!(a in I)}),ed);l.select(".chart-bars").selectAll(".chart-bar").data(a).enter().append("g").attr("class",function(a){return"chart-bar target target-"+a.id}).style("pointer-events","none").style("opacity",0).append("g").attr("class",Ac).style("fill",
function(a){return L(a.id)}).style("stroke",function(a){return L(a.id)}).style("stroke-width",0).style("cursor",function(a){return ga(a)?"pointer":null});b=l.select(".chart-lines").selectAll(".chart-line").data(a).enter().append("g").attr("class",function(a){return"chart-line target target-"+a.id}).style("pointer-events","none").style("opacity",0);b.append("path").attr("class",zc).style("stroke",function(a){return L(a.id)});b.append("path").attr("class",Nd).style("fill",function(a){return L(a.id)});
b.append("g").attr("class",function(a){return"selected-circles selected-circles-"+a.id});b.append("g").attr("class",Ld).style("fill",function(a){return L(a.id)}).style("cursor",function(a){return ga(a)?"pointer":null});a.forEach(function(a){l.selectAll(".selected-circles-"+a.id).selectAll(".selected-circle").each(function(b){b.value=a.values[b.x].value})});b=l.select(".chart-arcs").selectAll(".chart-arc").data(Jb(a)).enter().append("g").attr("class",function(a){return"chart-arc target target-"+a.data.id}).style("opacity",
0);b.append("path").attr("class",Md).style("fill",function(a){return L(a.data.id)}).style("cursor",function(a){return ga(a)?"pointer":null}).each(function(a){this._current=a}).on("mouseover",function(a){Xa(a.data.id);fd(a.data.id)}).on("mouseout",function(a){wb(a.data.id);gd()});b.append("text").attr("dy",".35em").style("text-anchor","middle").style("pointer-events","none");ya&&(b=E.select(".chart-bars").selectAll(".chart-bar").data(a),b=b.enter().append("g").attr("class",function(a){return"chart-bar target target-"+
a.id}).style("opacity",0),b.append("g").attr("class",Ac).style("fill",function(a){return L(a.id)}),b=E.select(".chart-lines").selectAll(".chart-line").data(a),b=b.enter().append("g").attr("class",function(a){return"chart-line target target-"+a.id}).style("opacity",0),b.append("path").attr("class",zc).style("stroke",function(a){return L(a.id)}));Aa&&vb(a);n.selectAll(".target").transition().style("opacity",1)}function Ra(a,b){h.data.targets.forEach(function(b){for(var e=0;e<a.length;e++)if(b.id===
a[e].id){b.values=a[e].values;a.splice(e,1);break}});h.data.targets=h.data.targets.concat(a);Zc(h.data.targets);J({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});b()}function fd(a){n.selectAll(".legend-item").filter(function(b){return b!==a}).transition().duration(100).style("opacity",0.3)}function gd(){n.selectAll(".legend-item").transition().duration(100).style("opacity",1)}function vb(a,b){var c=qb(a),e,d=q/2-Sa*Object.keys(a).length/2,f;b=x(b)?{}:b;f=r(b.withTransition)?b.withTransition:!0;e=
za.selectAll(".legend-item").data(c).enter().append("g").attr("class",function(a){return"legend-item legend-item-"+a}).style("cursor","pointer").on("click",function(a){ve(a)}).on("mouseover",function(a){fd(a);h.focus(a)}).on("mouseout",function(){gd();h.revert()});e.append("rect").attr("class","legend-item-event").style("fill-opacity",0).attr("x",-200).attr("y",function(){return la/2-16}).attr("width",Sa).attr("height",24);e.append("rect").attr("class","legend-item-tile").style("pointer-events","none").style("fill",
function(a){return L(a)}).attr("x",-200).attr("y",function(){return la/2-9}).attr("width",10).attr("height",10);e.append("text").text(function(a){return r(Ia[a])?Ia[a]:a}).style("pointer-events","none").attr("x",-200).attr("y",function(){return la/2});za.selectAll("rect.legend-item-event").data(c).transition().duration(f?250:0).attr("x",function(a,b){return d+Sa*b});za.selectAll("rect.legend-item-tile").data(c).transition().duration(f?250:0).attr("x",function(a,b){return d+Sa*b});za.selectAll("text").data(c).transition().duration(f?
250:0).attr("x",function(a,b){return d+Sa*b+14})}function Ta(a){return r(a)?".target-"+a:".target"}function cc(a){return xc(a.id)}function dc(a){return"data"in a&&xc(a.data.id)}var h={data:{}},ob={},aa="_expanded_",ha="_selected_",bc="_included_",sa=f(["bindto"],"#chart"),Ya=f(["size","width"],null),kc=f(["size","height"],null),Za=f(["padding","left"],null),ab=f(["padding","right"],null),oa=f(["zoom","enabled"],!1),hd=f(["zoom","extent"],null),je=f(["zoom","privileged"],!1),ee=f(["onenter"],function(){}),
fe=f(["onleave"],function(){});if(!("data"in ba))throw Error("data is required in config");var na=f(["data","x"],null),$=f(["data","xs"],null),Ob=f(["data","x_format"],"%Y-%m-%d"),Jd=f(["data","id_converter"],function(a){return a}),Ia=f(["data","names"],{}),t=f(["data","groups"],[]),oc=f(["data","axes"],{}),ed=f(["data","type"],null),I=f(["data","types"],{}),id=f(["data","regions"],{}),we=f(["data","colors"],{}),fa=f(["data","selection","enabled"],!1),pa=f(["data","selection","grouped"],!1),ga=f(["data",
"selection","isselectable"],function(){return!0}),ya=f(["subchart","show"],!1),zb=ya?f(["subchart","size","height"],60):0,xe=f(["color","pattern"],null),Aa=f(["legend","show"],!0),Sa=f(["legend","item","width"],80),ve=f(["legend","item","onclick"],function(){}),jd=f(["axis","x","type"],"indexed"),Ea=f(["axis","x","categories"],[]),qd=f(["axis","x","tick","centered"],!1),kb=f(["axis","x","tick","format"],null),ub=f(["axis","x","default"],null),ge=f(["axis","x","label"],null),zd=f(["axis","y","max"],
null),xd=f(["axis","y","min"],null),Bd=f(["axis","y","center"],null),he=f(["axis","y","label"],null),$a=f(["axis","y","inner"],!1),be=f(["axis","y","tick","format"],function(a){return a}),Fa=f(["axis","y","padding"],null),ae=f(["axis","y","ticks"],10),Ab=f(["axis","y2","show"],!1),yd=f(["axis","y2","max"],null),wd=f(["axis","y2","min"],null),Ad=f(["axis","y2","center"],null),bb=f(["axis","y2","inner"],!1),de=f(["axis","y2","tick","format"],function(a){return a}),Ga=f(["axis","y2","padding"],null),
ce=f(["axis","y2","ticks"],10),g=f(["axis","rotated"],!1),Xc=f(["grid","x","show"],!1),qe=f(["grid","x","type"],"tick"),Wb=f(["grid","x","lines"],null),Yc=f(["grid","y","show"],!1),Xb=f(["grid","y","lines"],null),Tb=f(["point","show"],!0)?f(["point","r"],2.5):0,ie=f(["point","focus","line","enabled"],!0),Yb=f(["point","focus","expand","enabled"],!0),Zb=f(["point","focus","expand","r"],Yb?4:Tb),Oa=f(["point","focus","select","r"],8),pe=f(["point","onclick"],function(){}),Xd=f(["point","onselected"],
function(){}),Yd=f(["point","onunselected"],function(){}),Q=f(["regions"],[]),Kc=f(["tooltip","contents"],function(a){var b="<table class='-tooltip'><tr><th colspan='2'>"+hc()(a[0].x)+"</th></tr>",c,d,f;for(c=0;c<a.length;c++)a[c]&&(a[c].value||0===a[c].value)&&(d=r(a[c].value)?(Math.round(100*a[c].value)/100).toFixed(2):"-",f=a[c].name,b+="<tr class='-tooltip-name-"+a[c].id+"'><td class='name'><span style='background-color:"+L(a[c].id)+"'></span>"+f+"</td><td class='value'>"+d+"</td></tr>");return b+
"</table>"}),ke=f(["tooltip","init","show"],!1),Ba=f(["tooltip","init","x"],0),$c=f(["tooltip","init","position"],{top:"0px",left:"50px"}),Vb=sa.replace("#","")+"-clip",Pa="url(#"+Vb+")",B="timeseries"===jd,ea="categorized"===jd,Lb=!B&&(na||$),ac=null,Qa=!1,$b=!1,la=Aa?40:0,L=function(a,b){var c=[],d=null!==b?b:"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");return function(b){if(b in a)return a[b];-1===c.indexOf(b)&&c.push(b);return d[c.indexOf(b)%d.length]}}(we,
xe),rd=function(){var a=[[d.time.format("%Y/%-m/%-d"),function(){return!0}],[d.time.format("%-m/%-d"),function(a){return a.getMonth()}],[d.time.format("%-m/%-d"),function(a){return 1!==a.getDate()}],[d.time.format("%-m/%-d"),function(a){return a.getDay()&&1!==a.getDate()}],[d.time.format("%I %p"),function(a){return a.getHours()}],[d.time.format("%I:%M"),function(a){return a.getMinutes()}],[d.time.format(":%S"),function(a){return a.getSeconds()}],[d.time.format(".%L"),function(a){return a.getMilliseconds()}]];
return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}(),q,Bb,s,cb,yb,ra,db,Cb,jb,mc,nc,Jb,Db,Eb,Fb,Gb,Hb,Ib,m,z,Z,U,gb,hb,K,ta,ib,fb,md=g?"left":"bottom",nd=g?$a?"top":"bottom":$a?"right":"left",od=g?bb?"bottom":"top":bb?"left":"right",pd=g?"left":"bottom",M={main:function(){return"translate("+A+","+u+")"},context:function(){return"translate("+Da+","+Ca+")"},legend:function(){return"translate("+fc+","+ec+")"},y2:function(){return"translate("+(g?0:q)+","+(g?10:0)+")"},
x:function(){return"translate(0,"+s+")"},subx:function(){return"translate(0,"+(g?0:cb)+")"},arc:function(){return"translate("+q/2+","+s/2+")"}},jc=40,ic=20;Jb=d.layout.pie().value(function(a){return a.values.reduce(function(a,c){return a+c.value},0)});var re=function(){var a=d.svg.line().x(g?function(a){return w(a.id)(a.value)}:ua).y(g?ua:function(a){return w(a.id)(a.value)});return function(b){var c=Qb(b.values),d;if(Nb(b))return Nc(b)?a.interpolate("cardinal"):a.interpolate("linear"),id[b.id]?$d(c,
m,w(b.id),id[b.id]):a(c);d=m(c[0].x);b=w(b.id)(c[0].value);return g?"M "+b+" "+d:"M "+d+" "+b}}(),se=function(){var a;a=g?d.svg.area().x0(function(a){return w(a.id)(0)}).x1(function(a){return w(a.id)(a.value)}).y(ua):d.svg.area().x(ua).y0(function(a){return w(a.id)(0)}).y1(function(a){return w(a.id)(a.value)});return function(b){var c=Qb(b.values),d;if(Ha([b],"area")||Ha([b],"area-spline"))return Nc(b)?a.interpolate("cardinal"):a.interpolate("linear"),a(c);d=m(c[0].x);b=w(b.id)(c[0].value);return g?
"M "+b+" "+d:"M "+d+" "+b}}(),te=function(){var a=d.svg.line().x(g?function(a){return F(a.id)(a.value)}:Ec).y(g?Ec:function(a){return F(a.id)(a.value)});return function(b){var c=Qb(b.values);return Nb(b)?a(c):"M "+U(c[0].x)+" "+F(b.id)(c[0].value)}}(),H=d.svg.brush().on("brush",function(){J({withTransition:!1,withY:!1,withSubchart:!1,withUpdateXDomain:!0})}),D=d.behavior.zoom().on("zoomstart",function(){D.altDomain=d.event.sourceEvent.altKey?m.orgDomain():null}).on("zoom",oa?ue:null);H.update=function(){E&&
E.select(".x.brush").call(this);return this};H.scale=function(a){return g?this.y(a):this.x(a)};D.scale=function(a){return g?this.y(a):this.x(a)};D.orgScaleExtent=function(){var a=hd?hd:[1,10];return[a[0],Math.max(eb()/a[1],a[1])]};D.updateScaleExtent=function(){var a=m.orgDomain(),a=(a[1]-a[0])/(V[1]-V[0]),b=this.orgScaleExtent();this.scaleExtent([b[0]*a,b[1]*a]);return this};var n,tb,l,E,za,W,sb,V;h.focus=function(a){var b=n.selectAll(Ta(a)),c=b.filter(cc),b=b.filter(dc);h.defocus();c.classed("focused",
!0).transition().duration(100).style("opacity",1);b.transition().duration(100).style("opacity",1);C(h.data.targets)&&Xa(a,!0)};h.defocus=function(a){var b=n.selectAll(Ta(a)),c=b.filter(cc),b=b.filter(dc);c.classed("focused",!1).transition().duration(100).style("opacity",0.3);b.transition().duration(100).style("opacity",0.3);C(h.data.targets)&&wb(a)};h.revert=function(a){var b=n.selectAll(Ta(a)),c=b.filter(cc),b=b.filter(dc);c.classed("focused",!1).transition().duration(100).style("opacity",1);b.transition().duration(100).style("opacity",
1);C(h.data.targets)&&wb(a)};h.show=function(a){n.selectAll(Ta(a)).transition().style("opacity",1)};h.hide=function(a){n.selectAll(Ta(a)).transition().style("opacity",0)};h.unzoom=function(){H.clear().update();J({withUpdateXDomain:!0})};h.load=function(a){"function"!==typeof a.done&&(a.done=function(){});a.xs&&Id(a.xs);"categories"in a&&ea&&(Ea=a.categories,K.categories(Ea));if("cacheIds"in a&&Ed(a.cacheIds))Ra(Fd(a.cacheIds),a.done);else if("data"in a)Ra(Ja(a.data),a.done);else if("url"in a)d.csv(a.url,
function(b,c){Ra(Ja(c),a.done)});else if("rows"in a)Ra(Ja(uc(a.rows)),a.done);else if("columns"in a)Ra(Ja(vc(a.columns)),a.done);else throw Error("url or rows or columns is required.");};h.unload=function(a){h.data.targets=h.data.targets.filter(function(b){return b.id!==a});n.selectAll(".target-"+a).transition().style("opacity",0).remove();Aa&&(n.selectAll(".legend-item-"+a).remove(),vb(h.data.targets));0<h.data.targets.length&&J({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})};h.selected=function(a){a=
r(a)?"-"+a:"";return d.merge(l.selectAll(".-shapes"+a).selectAll(".-shape").filter(function(){return d.select(this).classed(ha)}).map(function(a){return a.map(function(a){return a.__data__})}))};h.select=function(a,b,c){fa&&l.selectAll(".-shapes").selectAll(".-shape").each(function(e,f){var g="circle"===this.nodeName?Sc:Zd,h="circle"===this.nodeName?Pb:Uc;0<=b.indexOf(f)?ga(e)&&(pa||x(a)||0<=a.indexOf(e.id))&&g(d.select(this).classed(ha,!0),e,f):r(c)&&c&&h(d.select(this).classed(ha,!1),e,f)})};h.unselect=
function(a,b){fa&&l.selectAll(".-shapes").selectAll(".-shape").each(function(c,e){var f="circle"===this.nodeName?Pb:Uc;(x(b)||0<=b.indexOf(e))&&ga(c)&&(pa||x(a)||0<=a.indexOf(c.id))&&f(d.select(this).classed(ha,!1),c,e)})};h.toLine=function(a){Na(a,"line");J()};h.toSpline=function(a){Na(a,"spline");J()};h.toBar=function(a){Na(a,"bar");J()};h.toScatter=function(a){Na(a,"scatter");J()};h.groups=function(a){if(x(a))return t;t=a;J();return t};h.regions=function(a){if(x(a))return Q;Q=a;J();return Q};h.regions.add=
function(a){if(x(a))return Q;Q=Q.concat(a);J();return Q};h.regions.remove=function(a,b){var c=[].concat(a);b=r(b)?b:{};c.forEach(function(a){var c=n.selectAll("."+a);r(b.duration)&&(c=c.transition().duration(b.duration).style("fill-opacity",0));c.remove();Q=Q.filter(function(b){return 0>b.classes.indexOf(a)})});return Q};h.data.get=function(a){a=h.data.getAsTarget(a);return r(a)?a.values.map(function(a){return a.value}):void 0};h.data.getAsTarget=function(a){var b=mb(function(b){return b.id===a});
return 0<b.length?b[0]:void 0};h.destroy=function(){h.data.targets=void 0;h.data.x={};sb.html("");P.onresize=null};if("url"in ba.data)d.csv(ba.data.url,function(a,b){Ub(b)});else if("rows"in ba.data)Ub(uc(ba.data.rows));else if("columns"in ba.data)Ub(vc(ba.data.columns));else throw Error("url or rows or columns is required.");return h}})(window);
